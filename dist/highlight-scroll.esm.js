function u(n={}){return function(i){let h=n.offset??50,d=n.highlightClasses??"ease-in-out text-blue-500 scale-110 dark:text-blue-500 transition-all";i.store("HighlightScroll",{groups:{},getGroup(t){return t||(t="default"),this.groups[t]||(this.groups[t]={scrollEl:window,offset:h,highlightClasses:d,items:[],sections:[]}),this.groups[t]},setGroupOptions({group:t="default",offset:o,highlightClasses:l}){let r=this.getGroup(t);typeof o<"u"&&(r.offset=o),typeof l<"u"&&(r.highlightClasses=l)},setScrollable({group:t="default",el:o}){let l=this.getGroup(t);l.scrollEl=o},registerItem({group:t="default",el:o,target:l}){this.getGroup(t).items.push({el:o,target:l})},registerSection({group:t="default",el:o,id:l}){this.getGroup(t).sections.push({el:o,id:l})},onScroll(t="default"){let o=this.getGroup(t),l=o.scrollEl;if(!l)return;let r=l===window?window.scrollY:l.scrollTop,e="";for(let s=0;s<o.sections.length;s++){let g=o.sections[s],a=o.sections[s+1],p=g.el.offsetTop-o.offset,S=a?a.el.offsetTop-o.offset:1/0;if(r>=p&&r<S){e=g.id;break}}for(let s of o.items)s.el.classList.remove(...o.highlightClasses.split(" "));if(e){let s=o.items.find(g=>g.target===e);s&&s.el.classList.add(...o.highlightClasses.split(" "))}},smoothScrollTo({group:t="default",target:o}){let l=this.getGroup(t),r=l.scrollEl,e=document.getElementById(o);if(!e)return;let s=e.offsetTop-l.offset;r===window?window.scrollTo({top:s,behavior:"smooth"}):r.scrollTo({top:s,behavior:"smooth"})}});function c({expression:t,evaluate:o,defaultProp:l}){if(!t||!t.trim())return{};try{let r=o(t);return typeof r=="string"?{[l]:r}:r&&typeof r=="object"?r:{[l]:t}}catch{return{[l]:t}}}i.directive("scroll-group",(t,{expression:o},{evaluate:l})=>{let r=c({expression:o,evaluate:l,defaultProp:"group"}),e=r.group||"default";i.store("HighlightScroll").setGroupOptions({group:e,offset:r.offset,highlightClasses:r.highlightClasses}),t.dataset.scrollGroup=e}),i.directive("scroll-container",(t,{expression:o},{evaluate:l})=>{let e=c({expression:o,evaluate:l,defaultProp:"group"}).group||f(t)||"default";i.store("HighlightScroll").setScrollable({group:e,el:t}),t.addEventListener("scroll",()=>{i.store("HighlightScroll").onScroll(e)}),i.store("HighlightScroll").onScroll(e)}),i.directive("scroll-item",(t,{expression:o},{evaluate:l})=>{let r;typeof o=="string"?r=c({expression:o,evaluate:l,defaultProp:"target"}):r=o;let e=r.group||f(t),s=r.target||r.id;s&&(i.store("HighlightScroll").registerItem({group:e,el:t,target:s}),t.addEventListener("click",()=>{i.store("HighlightScroll").smoothScrollTo({group:e,target:s})}))}),i.directive("scroll-section",(t,{expression:o},{evaluate:l})=>{let r;typeof o=="string"?r=c({expression:o,evaluate:l,defaultProp:"id"}):r=o;let e=r.group||f(t),s=r.id;s&&(t.id||(t.id=s),i.store("HighlightScroll").registerSection({group:e,el:t,id:s}))}),window.addEventListener("scroll",()=>{i.store("HighlightScroll").getGroup("default").scrollEl===window&&i.store("HighlightScroll").onScroll("default")}),i.store("HighlightScroll").getGroup("default").scrollEl===window&&i.store("HighlightScroll").onScroll("default");function f(t){let o=t.closest("[data-scroll-group]");return o?o.dataset.scrollGroup:"default"}}}var H=u;export{H as default};
